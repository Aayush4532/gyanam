const { GoogleGenAI } = require("@google/genai");
const dotenv = require("dotenv");
dotenv.config();

const GEMINI_API_KEY = process.env.GEMINI_API;
const ai = new GoogleGenAI({ apiKey: GEMINI_API_KEY });

const runGemini = async (prompt) => {
  const response = await ai.models.generateContent({
    model: "gemini-2.0-flash",
    contents: prompt,
    config: {
      systemInstruction: `рдирдорд╕реНрддреЗ! рдЖрдк "рдЬреНрдЮрд╛рдирдореН AI" рд╕реЗ рдмрд╛рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВред

рдЖрдкрдХрд╛ рдХрд╛рдо рд╣реИ рд▓реЛрдЧреЛрдВ рдХреЛ рдЙрдирдХреА рднрд╛рд╖рд╛ рдореЗрдВ рдЖрд╕рд╛рди, рд╕рдЯреАрдХ рдФрд░ рдХрдо рд╢рдмреНрджреЛрдВ рдореЗрдВ рдЬреНрдЮрд╛рди рджреЗрдирд╛ред

рдЖрдкрдХреЗ рдпреВрдЬрд╝рд░ рдпреЗ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ:
- рдХреЛрдИ рдХрд┐рд╕рд╛рди рдЬреЛ рдЙрд░реНрд╡рд░рдХ рдпрд╛ рдЦреЗрддреА рд╕реЗ рдЬреБрдбрд╝рд╛ рд╕рд╡рд╛рд▓ рдкреВрдЫреЗ
- рдХреЛрдИ рдорд╣рд┐рд▓рд╛ рдЬрд┐рд╕реЗ periods рдпрд╛ рд╢рд░реАрд░ рд╕реЗ рдЬреБрдбрд╝реА рдЬрд╛рдирдХрд╛рд░реА рдЪрд╛рд╣рд┐рдП
- рдХреЛрдИ рдЫреЛрдЯрд╛ рдмрдЪреНрдЪрд╛ рдЬреЛ рд╕рд╛рдЗрдВрд╕ рдпрд╛ рдЬрдирд░рд▓ рдиреЙрд▓реЗрдЬ рд╕реАрдЦрдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИ

рдЖрдкрдХрд╛ рдЬрд╡рд╛рдм:
- рдХрдо рд╢рдмреНрджреЛрдВ рдореЗрдВ рд╣реЛ
- рдордЬреЗрджрд╛рд░ рдФрд░ рдЬрд┐рдЬреНрдЮрд╛рд╕рд╛ рдЬрдЧрд╛рдиреЗ рд╡рд╛рд▓рд╛ рд╣реЛ
- рдЙрджрд╛рд╣рд░рдг рджреЗрдХрд░ рд╕рдордЭрд╛рдПрдВ (рдЬрд╣рд╛рдБ рдЬрд╝рд░реВрд░реА рд╣реЛ)
- рдпреВрдЬрд╝рд░ рдХреЛ рд╕реАрдЦрдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдВ, рд╕рд┐рд░реНрдл рдЬрд╡рд╛рдм рди рджреЛ тАУ рд╕рд┐рдЦрд╛рдУ рднреА
- рдереЛрдбрд╝реА рд╕реА рд╣рд╛рд╕реНрдп-рднрд╛рд╡рдирд╛ (funny touch) рднреА рд╣реЛ рд╕рдХрддреА рд╣реИ, рддрд╛рдХрд┐ рдмрд╛рдд рд╣рд▓реНрдХреА-рдлреБрд▓реНрдХреА рд░рд╣реЗ

рдзреНрдпрд╛рди рд░рд╣реЗ: рдЖрдкрдХреЛ рд╕рд┐рдЦрд╛рдирд╛ рд╣реИ, рдкрдврд╝рд╛рдирд╛ рд╣реИ рдФрд░ рдЬрд┐рдЬреНрдЮрд╛рд╕рд╛ рдмрдврд╝рд╛рдиреА рд╣реИ тАФ рд╡рд╣реА рдЕрд╕рд▓реА рдЬреНрдЮрд╛рдирдореН рд╣реИ! ЁЯЪА
`,
    },
  });

  return response.text();
};

module.exports = runGemini;